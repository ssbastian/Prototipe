version: "3.1"

intents:
  - saludo
  - dar_nombre
  - expresar_emocion
  - escribir_emocion_manual # no 
  - consulta_ayuda
  - iniciar_conversacion_ligera #no
  - consejos_sociales

  - afirmar #no
  - negar # no 
  - afirmar_ayuda_emocion
  - negar_ayuda_emocion

    finalizar_ejercicio
    paso_inhalar_listo
    paso_mantener_listo
    paso_exhalar_listo

  - traer_botones # no 
  - cambiar_tema # no 
  - continuar # no 


entities:
  - person_name
  - emotion

  - situacion_social # no 
  - tipo_consejo
  - actividad
  - tiempo
  - feedback_sentimiento
  - intensidad_emocion

slots:
  
  usuario_nuevo:
    type: bool
    initial_value: true
    influence_conversation: true
    mappings: 
      - type: custom

  name:
    type: text
    mappings:
      - type: from_entity
        entity: person_name
    influence_conversation: true

  emocion:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: emotion

  #para recordar temas
  emocion_registrada:
    type: bool
    initial_value: false
    influence_conversation: false
    mappings: 
      - type: custom

  ayuda_recomendada:
    type: text
    initial_value: false
    influence_conversation: false
    mappings: 
      - type: custom

    
  ultimo_tema:
    type: text
    influence_conversation: true
    mappings:
      - type: custom
 

  tema_interrumpido:
    type: bool
    influence_conversation: true
    mappings:
      - type: custom
 

  ultimo_tema_guardado:  # Nuevo slot para backup
    type: text
    influence_conversation: false
    mappings:
      - type: custom



  user_telegram_id:
    type: text
    influence_conversation: false
    mappings:
      - type: custom




responses:


  utter_botones:
    - text: "Hola estos son los botonoes"

  utter_pedir_nombre:
    - text: "Hola, ¿cómo te llamas?"

  utter_saludo_con_nombre:
    - text: "¡Hola de nuevo, {name}!"
  
  utter_ya_saludado:
    - text: "¡Hola de nuevo! ¿Cómo te puedo ayudar ahora?"

  utter_saludo_nombre:
    - text: "¡{name}! Me alegra verte por aquí."

  utter_solicitar_emocion_libre:
    - text: "Claro, cuéntame con tus propias palabras cómo te sientes."
    
  utter_opciones_post_emocion:
    - text: "¿Qué quieres hacer ahora? Puedes pedirme un consejo, contarme algo o simplemente charlar. 😊"


  utter_ofrecer_ayuda:
    - text: "Claro, estoy aquí para ayudarte 😊 ¿Sobre qué tema te gustaría hablar? Puedo darte consejos o simplemente escucharte."
  
  utter_iniciar_conversacion_ligera:
    - text: "¡Por supuesto! A veces es bueno desconectarse un poco. ¿Te gustaría que hablemos de hobbies, películas o algo que te relaje?"
 
  utter_consejos_sociales:
    - text: "Un buen primer paso es practicar pequeñas conversaciones. Puedes empezar saludando o preguntando algo simple como '¿Cómo va tu día?'. La clave es no presionarte demasiado 😊 ¿Quieres que te comparta algunos ejemplos prácticos?"


  utter_default:
    - text: "Lo siento, no entendí bien eso. ¿Podrías reformularlo o preguntarme algo relacionado con la ansiedad social?"


  utter_ofrecer_recursos:
    - text: "Si necesitas ayuda profesional, puedo ofrecerte recursos o conectarte con un especialista. ¿Te gustaría eso?"

  utter_preguntar_continuar:
    - text: "¿Quieres continuar con lo anterior o prefieres cambiar de tema?"
      buttons:
        - title: "Continuar"
          payload: "/continuar"
        - title: "Cambiar"
          payload: "/cambiar_tema"

  utter_retomar_ultimo_tema:
    - text: "Volvamos a lo tuyo: ¿qué te gustaría hacer ahora? 😊" 

  utter_test_afirmar:
    - text: "¡Genial! Me alegra que estés de acuerdo. 😊 ¿En qué más puedo ayudarte?xxx"
  utter_test_negar:
    - text: "Entiendo, no hay problema. Si cambias de opinión, aquíxxxx"

  utter_test_feliz_afirmar:
    - text: "¡que bueno que estes feliz, y que bueno que quieras entrenar"

  utter_test_feliz_negar:
    - text: "¡que bueno que estes feliz, pero que mal que no quieras entrenar"


  utter_ok_sin_ayuda:
    - text: "Perfecto 👍, entonces seguimos conversando de lo que quieras."


  utter_respetar_decision:
    - text: "Está bien, no haremos el ejercicio de respiración. 👍"

  utter_ofrecer_opciones:
    - text: "Podemos probar otra actividad o simplemente conversar. ¿Qué prefieres?"
      buttons:
        - title: "Otra actividad"
          payload: "/otra_actividad"
        - title: "Conversar"
          payload: "/conversar"
  
  utter_a:
    - text: "¡Holaaaaaaaa"


actions:

  - action_guardar_nombre
  - action_preguntar_emocion
  - action_reaccionar_emocion
  - action_reaccionar_emocion2
  - action_solicitar_emocion_libre
  - action_ofrecer_ayuda
  
  #ejercicio respiracion
  - action_ejercicio_respiracion
  - action_ejercicio_respiracion_mantener
  - action_ejercicio_respiracion_exhalar
  - action_ejercicio_respiracion_final

  - action_guardar_contexto
  - action_recuperar_contexto


  - action_get_telegram_id
  - action_motivacion_personalizada
  - action_simular_conversacion
  - action_guia_respiracion
  - action_sugerir_temas
  - action_set_name


session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true
